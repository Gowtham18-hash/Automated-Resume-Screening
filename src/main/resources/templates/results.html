<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>spring.ai - Results</title>
    <link rel="stylesheet" th:href="@{/css/style.css?v=3}">
</head>

<body>
    <div class="container">
        <header class="site-header">
            <a href="/" class="logo">spring.ai</a>
            <nav class="navbar">
                <a href="/">UPLOAD</a>
                <a href="/results" class="active">RESULTS</a>
                <a href="/shortlist">SHORTLIST</a>
            </nav>
        </header>

        <div style="max-width: 800px; margin: 0 auto;">
            <div class="mb-4">
                <h2 style="font-size: 1.5rem;">Analysis Results</h2>
                <p class="text-muted">Matching Candidates Found</p>
            </div>

            <div th:each="resume : ${resumes}" class="glass-card mb-4">
                <div
                    style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1.5rem;">
                    <h2 th:text="${resume.filename}" style="margin: 0; font-size: 1.25rem;">FILENAME</h2>
                    <span class="badge-modern badge-success">
                        SCORE: <span th:text="${resume.score}">0</span>%
                    </span>
                </div>

                <div class="mb-4">
                    <p class="text-muted small fw-bold mb-1">IDENTIFIED SKILLS</p>
                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                        <span class="highlight-box" th:text="${resume.skills}">SKILLS</span>
                    </div>
                </div>

                <div style="border-top: 1px solid var(--border-color); padding-top: 1.5rem;">
                    <div style="display: flex; gap: 1rem;">
                        <form th:action="@{/shortlist/{id}(id=${resume.id})}" method="POST" style="flex-grow: 1;">
                            <button type="submit" class="btn-primary w-100">Shortlist</button>
                        </form>
                        <a th:href="@{/resume-details/{id}(id=${resume.id})}" class="btn-secondary">Details</a>
                    </div>
                </div>
            </div>

            <div th:if="${resumes.empty}" class="glass-card text-center py-5">
                <p class="text-muted">No pending resumes found.</p>
                <a href="/" class="btn-primary mt-3">Upload New</a>
            </div>
        </div>
    </div>
</body>

</html>